<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="StrasSound" content="StrasSound"/>
    <meta name="viewport" content="width=device-width, initial-scale=0.9">
    <link href="bootstrap.css" rel="stylesheet">
    <title>StrasSound</title>
    <style>
    #map {
        height: 100vh;
        width: 100%;
         clip-path: circle(300px at center);
          /* OLD VALUE example: circle(245px, 140px, 50px); */
          /* Yep, even the new clip-path has deprecated stuff. */
}
    }

    </style>
</head>
<script type="text/javascript" src="jquery.min.js"></script>
<body>
    <div id="map"></div>
    <audio id="player">

    </audio>
    <script>
    window.showed = true;

    function showOthers(){
        showed = (showed ? false : true);

        if(!showed)
        $("#otherPre").css("display","inline");
        else
        $("#otherPre").css("display","none");

    }


    function initMap() {
        var allMarks = [
            {pos :{lat:48.5840324, lng: 7.744312}, title :"Homme de fer", sound:"audio/homme de fer.mp3"},
            {pos :{lat:48.5834538, lng: 7.7456927}, title :"Place Kleber", sound:"audio/place kleber.mp3"}

        ];

        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 16,
            center: allMarks[0].pos,
            styles :[
    {
        "featureType": "administrative",
        "elementType": "labels.text.fill",
        "stylers": [
            {
                "color": "#444444"
            }
        ]
    },
    {
        "featureType": "landscape",
        "elementType": "all",
        "stylers": [
            {
                "color": "#f2f2f2"
            }
        ]
    },
    {
        "featureType": "poi",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "road",
        "elementType": "all",
        "stylers": [
            {
                "saturation": -100
            },
            {
                "lightness": 45
            }
        ]
    },
    {
        "featureType": "road.highway",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "simplified"
            }
        ]
    },
    {
        "featureType": "road.highway",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "color": "#000000"
            }
        ]
    },
    {
        "featureType": "road.highway",
        "elementType": "geometry.stroke",
        "stylers": [
            {
                "color": "#ff0000"
            }
        ]
    },
    {
        "featureType": "road.highway.controlled_access",
        "elementType": "geometry",
        "stylers": [
            {
                "color": "#000000"
            }
        ]
    },
    {
        "featureType": "road.highway.controlled_access",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "color": "#000000"
            }
        ]
    },
    {
        "featureType": "road.highway.controlled_access",
        "elementType": "geometry.stroke",
        "stylers": [
            {
                "color": "#ff0000"
            }
        ]
    },
    {
        "featureType": "road.arterial",
        "elementType": "geometry",
        "stylers": [
            {
                "color": "#000000"
            },
            {
                "visibility": "on"
            }
        ]
    },
    {
        "featureType": "road.arterial",
        "elementType": "geometry.fill",
        "stylers": [
            {
                "visibility": "on"
            }
        ]
    },
    {
        "featureType": "road.arterial",
        "elementType": "geometry.stroke",
        "stylers": [
            {
                "color": "#000000"
            }
        ]
    },
    {
        "featureType": "road.arterial",
        "elementType": "labels.icon",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "transit",
        "elementType": "all",
        "stylers": [
            {
                "visibility": "off"
            }
        ]
    },
    {
        "featureType": "transit.line",
        "elementType": "geometry",
        "stylers": [
            {
                "color": "#090909"
            }
        ]
    },
    {
        "featureType": "water",
        "elementType": "all",
        "stylers": [
            {
                "color": "#000000"
            },
            {
                "visibility": "on"
            }
        ]
    }
]


        });


        var i =0;
        window.markers= [];
        window.infos = [];
        window.players = {};

        allMarks.forEach(function(elem){
            markers[i] = new google.maps.Marker({
                position: elem.pos,
                map: map,
                self : markers[i],
                infos : new google.maps.InfoWindow({
                    content: "<p>"+elem.title+"</p>"
                }),
                sound : elem.sound
            });

            window.players[elem.sound] = $("<audio src ='audio/"+elem.sound+"'></audio>");


            google.maps.event.addListener(markers[i], 'click', function(){
                this.infos.open(this.get('map'), this);

                var player = $("#player");
                player[0].src = this.sound;
                player[0].play().catch((error) => {
                     alert( "file not found: " + error);
                });
            });

            i++;
        });
    }



    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVBPnK06zE4EVfcvXzWtVfjBTRASMP21c&callback=initMap">
    </script>
</body>
</html>
